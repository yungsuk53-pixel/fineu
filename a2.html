<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>FINE U - 뉴스</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            zoom: 1;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }
        .card-shadow {
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background: linear-gradient(135deg, #4A6FA5, #6B8DC7);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(74, 111, 165, 0.3);
        }
        .level-badge-nav {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 12px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 10;
        }
        .level-yellow { background: linear-gradient(135deg, #FCD34D, #F59E0B); }

        .bottom-navigation {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #e5e7eb;
            padding: 12px 0 8px 0;
            z-index: 50;
        }

        .nav-container {
            max-width: 28rem;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
            align-items: end;
            position: relative;
            height: 60px;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 4px;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .nav-item:hover {
            transform: translateY(-1px);
        }

        .nav-item i {
            font-size: 20px;
        }

        .nav-item span {
            font-size: 11px;
            font-weight: 500;
        }

        .nav-item.active i {
            color: #3B82F6;
        }

        .nav-item.active span {
            color: #3B82F6;
        }

        .nav-center {
            grid-column: 3;
            display: flex;
            justify-content: center;
            align-items: end;
            height: 100%;
            position: relative;
        }

        .news-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border-left: 4px solid;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .news-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .news-card.featured {
            border-left-color: #F59E0B;
            background: linear-gradient(135deg, #FEF3C7, #FFFFFF);
        }

        .news-card.normal {
            border-left-color: #3B82F6;
        }

        .news-card .icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
            color: white;
            font-size: 18px;
        }

        .news-card.featured .icon {
            background: linear-gradient(135deg, #F59E0B, #D97706);
        }

        .news-card.normal .icon {
            background: linear-gradient(135deg, #3B82F6, #2563EB);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #E5E7EB;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3B82F6, #6B8DC7);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .real-time-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: #10B981;
            border-radius: 50%;
            animation: pulse 2s infinite;
            margin-right: 4px;
        }

        @keyframes pulse {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
            }
            
            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
            }
            
            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }
    </style>
</head>
<body>

<div class="min-h-screen bg-gray-100">
    <!-- 상단 헤더 -->
    <div class="bg-white shadow-sm p-4">
        <div class="flex items-center justify-between max-w-md mx-auto">
            <button onclick="location.href='index.html'" class="text-gray-600">
                <i class="fas fa-arrow-left text-xl"></i>
            </button>
            <div class="text-center">
                <h1 class="text-xl font-bold">투자 뉴스</h1>
                <div class="flex items-center justify-center text-xs">
                    <span class="real-time-indicator"></span>
                    <span class="text-green-600 mr-1">실시간</span>
                    <span class="text-gray-500" id="currentTime">12:01:35</span>
                </div>
            </div>
            <button onclick="refreshNews()" class="text-purple-500">
                <i class="fas fa-sync-alt text-xl" id="refreshIcon"></i>
            </button>
        </div>
    </div>

    <!-- 뉴스 콘텐츠 -->
    <div class="max-w-md mx-auto px-4 py-6 mb-24">
        <!-- 금융 용어 -->
        <div class="news-card featured" onclick="location.href='a2-terms.html'">
            <div class="icon">
                <i class="fas fa-book"></i>
            </div>
            <h3 class="text-lg font-bold mb-2">금융 용어</h3>
            <p class="text-gray-600 text-sm" id="termsDesc">오늘의 필수 금융 용어를 학습하세요</p>
            <div class="progress-bar">
                <div class="progress-fill" id="termProgress" style="width: 0%"></div>
            </div>
        </div>

        <!-- 금융 퀴즈 -->
        <div class="news-card featured" onclick="location.href='a2-quiz.html'">
            <div class="icon">
                <i class="fas fa-question-circle"></i>
            </div>
            <h3 class="text-lg font-bold mb-2">금융 퀴즈</h3>
            <p class="text-gray-600 text-sm" id="quizDesc">오늘의 뉴스 기반 퀴즈로 실력을 테스트하세요</p>
            <div class="progress-bar">
                <div class="progress-fill" id="quizProgress" style="width: 0%"></div>
            </div>
        </div>

        <!-- 금융 뉴스 -->
        <div class="news-card normal" onclick="location.href='a2-news.html'">
            <div class="icon">
                <i class="fas fa-newspaper"></i>
            </div>
            <h3 class="text-lg font-bold mb-2">금융 뉴스</h3>
            <p class="text-gray-600 text-sm" id="newsDesc">실시간 경제 뉴스를 확인하세요</p>
            <div class="progress-bar">
                <div class="progress-fill" id="newsProgress" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <!-- 하단 네비게이션 -->
    <div class="bottom-navigation">
        <div class="nav-container">
            <button onclick="location.href='index.html'" class="nav-item">
                <i class="fas fa-home text-gray-400"></i>
                <span class="text-gray-400">홈</span>
            </button>
            <button onclick="location.href='a2.html'" class="nav-item active">
                <i class="fas fa-newspaper"></i>
                <span>뉴스</span>
            </button>
            <div class="nav-center">
                <div class="level-badge-nav level-yellow" onclick="location.href='a5.html'">
                    YELLOW
                </div>
            </div>
            <button onclick="location.href='a4.html'" class="nav-item">
                <i class="fas fa-gamepad text-gray-400"></i>
                <span class="text-gray-400">게임</span>
            </button>
            <button onclick="location.href='a3.html'" class="nav-item">
                <i class="fas fa-ellipsis-h text-gray-400"></i>
                <span class="text-gray-400">더보기</span>
            </button>
        </div>
    </div>
</div>

<script>
// 현재 시간 업데이트
function updateCurrentTime() {
    var now = new Date();
    var hours = String(now.getHours()).padStart(2, '0');
    var minutes = String(now.getMinutes()).padStart(2, '0');
    var seconds = String(now.getSeconds()).padStart(2, '0');
    
    document.getElementById('currentTime').textContent = hours + ':' + minutes + ':' + seconds;
}

// 오늘 날짜 가져오기
function getTodayDate() {
    return new Date().toLocaleDateString('ko-KR');
}

// 오늘의 데이터 확인 및 생성
async function checkAndGenerateTodayData() {
    const today = getTodayDate();
    const savedDate = localStorage.getItem('dataGeneratedDate');
    
    if (savedDate === today) {
        const savedData = localStorage.getItem('todayFinancialData');
        if (savedData) {
            updateProgressBars(JSON.parse(savedData));
            return;
        }
    }
    
    // 오늘 데이터 생성
    const todayData = await generateTodayData();
    
    localStorage.setItem('dataGeneratedDate', today);
    localStorage.setItem('todayFinancialData', JSON.stringify(todayData));
    
    updateProgressBars(todayData);
}

// 오늘의 데이터 생성
async function generateTodayData() {
    // 실제 뉴스 데이터 (API 또는 백업)
    const newsData = await generateNewsData();
    
    // 뉴스 기반 용어 추출
    const terms = generateTermsFromNews(newsData);
    
    // 뉴스 기반 퀴즈 생성
    const quizzes = generateQuizzesFromNews(newsData);
    
    return {
        news: newsData,
        terms: terms,
        quizzes: quizzes,
        generatedAt: new Date().toISOString()
    };
}

// 뉴스 데이터 생성
async function generateNewsData() {
    const today = new Date();
    return [
        {
            id: 'news_' + Date.now() + '_1',
            title: '한국은행, 기준금리 동결 결정... 물가 안정 최우선',
            description: '한국은행 금융통화위원회가 기준금리를 현 수준에서 동결하기로 결정했습니다.',
            content: '한국은행 금융통화위원회는 오늘 회의에서 기준금리를 연 3.5%로 동결하기로 결정했습니다.',
            date: today.toISOString(),
            source: '경제뉴스'
        },
        {
            id: 'news_' + Date.now() + '_2',
            title: '코스피 2,650선 회복... 외국인 순매수 지속',
            description: '코스피가 외국인 투자자들의 순매수에 힘입어 2,650선을 회복했습니다.',
            content: '코스피 지수가 외국인 투자자들의 지속적인 순매수에 힘입어 2,650선을 회복했습니다.',
            date: today.toISOString(),
            source: '증권뉴스'
        },
        {
            id: 'news_' + Date.now() + '_3',
            title: '삼성전자, AI 반도체 신제품 발표... 주가 3% 상승',
            description: '삼성전자가 차세대 AI 반도체를 발표하며 주가가 급등했습니다.',
            content: '삼성전자가 차세대 인공지능(AI) 전용 반도체 개발 계획을 발표했습니다.',
            date: today.toISOString(),
            source: '기업뉴스'
        },
        {
            id: 'news_' + Date.now() + '_4',
            title: 'ETF 시장 규모 100조원 돌파... 개인투자자 증가',
            description: '국내 ETF 시장 규모가 처음으로 100조원을 돌파했습니다.',
            content: '국내 ETF 시장 규모가 개인투자자들의 적극적인 참여로 100조원을 넘어섰습니다.',
            date: today.toISOString(),
            source: '투자뉴스'
        },
        {
            id: 'news_' + Date.now() + '_5',
            title: '미 연준, 금리 인하 시사... 글로벌 증시 상승',
            description: '미국 연방준비제도가 금리 인하 가능성을 시사했습니다.',
            content: '미국 연방준비제도(Fed)가 경제 지표 개선에 따라 금리 인하를 검토하고 있습니다.',
            date: today.toISOString(),
            source: '국제뉴스'
        }
    ];
}

// 뉴스에서 용어 추출
function generateTermsFromNews(newsData) {
    const financialKeywords = {
        '금리': { 
            term: '금리(Interest Rate)', 
            definition: '자금을 빌려주거나 빌릴 때 적용되는 이자의 비율',
            example: '한국은행이 기준금리를 연 3.5%로 결정했습니다.'
        },
        '코스피': { 
            term: '코스피(KOSPI)', 
            definition: '한국종합주가지수로, 한국거래소 유가증권시장에 상장된 모든 종목의 시가총액을 지수화한 것',
            example: '오늘 코스피는 2,650선에서 마감했습니다.'
        },
        'ETF': { 
            term: 'ETF(Exchange Traded Fund)', 
            definition: '거래소에서 주식처럼 거래되는 인덱스펀드',
            example: 'KODEX 200 ETF는 코스피 200 지수를 추종합니다.'
        }
    };
    
    const terms = [];
    newsData.forEach(news => {
        const content = (news.title + ' ' + news.description).toLowerCase();
        Object.keys(financialKeywords).forEach(keyword => {
            if (content.includes(keyword.toLowerCase()) && !terms.find(t => t.term === financialKeywords[keyword].term)) {
                terms.push({
                    ...financialKeywords[keyword],
                    relatedNews: news.title,
                    id: 'term_' + Date.now() + '_' + terms.length
                });
            }
        });
    });
    
    if (terms.length > 0) {
        terms[0].isToday = true;
    }
    
    return terms;
}

// 뉴스 기반 퀴즈 생성
function generateQuizzesFromNews(newsData) {
    return {
        beginner: [
            {
                id: 'quiz_b_1',
                question: '한국은행이 결정하는 경제의 기준이 되는 금리는?',
                options: ['기준금리', '대출금리', '예금금리', '시장금리'],
                correct: 0
            },
            {
                id: 'quiz_b_2',
                question: '코스피는 무엇의 약자인가요?',
                options: ['한국종합주가지수', '한국선물지수', '한국채권지수', '한국원자재지수'],
                correct: 0
            },
            {
                id: 'quiz_b_3',
                question: 'ETF의 가장 큰 특징은?',
                options: ['은행에서만 거래', '거래소에서 실시간 거래', '연 1회만 거래', '장외거래만 가능'],
                correct: 1
            },
            {
                id: 'quiz_b_4',
                question: '주가가 상승할 때 사용하는 색깔은?',
                options: ['파란색', '빨간색', '초록색', '노란색'],
                correct: 1
            },
            {
                id: 'quiz_b_5',
                question: '외국인이 주식을 많이 사는 것을?',
                options: ['순매도', '순매수', '공매도', '신용매수'],
                correct: 1
            }
        ],
        intermediate: [
            {
                id: 'quiz_i_1',
                question: '금리 인상이 주식시장에 미치는 일반적인 영향은?',
                options: ['주가 상승', '주가 하락', '변화 없음', '거래량만 증가'],
                correct: 1
            },
            {
                id: 'quiz_i_2',
                question: 'P/E Ratio가 낮다는 것은?',
                options: ['주가가 고평가', '주가가 저평가', '배당금이 많음', '부채가 많음'],
                correct: 1
            },
            {
                id: 'quiz_i_3',
                question: '인플레이션 헤지에 유리한 자산은?',
                options: ['현금', '채권', '부동산', '예금'],
                correct: 2
            },
            {
                id: 'quiz_i_4',
                question: '공매도의 목적은?',
                options: ['주가 상승 시 이익', '주가 하락 시 이익', '배당금 수령', '의결권 행사'],
                correct: 1
            },
            {
                id: 'quiz_i_5',
                question: '양적완화 정책의 효과는?',
                options: ['통화량 감소', '통화량 증가', '금리 상승', '환율 상승'],
                correct: 1
            }
        ],
        advanced: [
            {
                id: 'quiz_a_1',
                question: '옵션의 델타(Delta)가 측정하는 것은?',
                options: ['시간가치 변화', '기초자산 가격변화 대비 옵션가격 변화', '변동성 변화', '이자율 변화'],
                correct: 1
            },
            {
                id: 'quiz_a_2',
                question: '샤프 비율(Sharpe Ratio)이 높을수록?',
                options: ['위험이 높음', '수익률이 낮음', '위험 대비 수익률이 좋음', '변동성이 큼'],
                correct: 2
            },
            {
                id: 'quiz_a_3',
                question: '컨탱고(Contango) 시장의 특징은?',
                options: ['선물가격 < 현물가격', '선물가격 > 현물가격', '선물가격 = 현물가격', '가격 무관'],
                correct: 1
            },
            {
                id: 'quiz_a_4',
                question: 'VIX 지수가 높다는 것은?',
                options: ['시장 안정', '변동성 증가', '거래량 감소', '금리 인상'],
                correct: 1
            },
            {
                id: 'quiz_a_5',
                question: '듀레이션이 긴 채권의 특징은?',
                options: ['금리 민감도 낮음', '금리 민감도 높음', '만기가 짧음', '신용위험 낮음'],
                correct: 1
            }
        ]
    };
}

// 진행률 업데이트
function updateProgressBars(data) {
    const today = getTodayDate();
    
    // 완료 상태 확인
    const completedTerms = JSON.parse(localStorage.getItem('completedTerms') || '{}')[today] || [];
    const completedQuizzes = JSON.parse(localStorage.getItem('completedQuizzes') || '{}')[today] || {};
    const readNews = JSON.parse(localStorage.getItem('readNews') || '{}')[today] || [];
    
    // 용어 진행률
    const termProgress = data.terms.length > 0 ? 
        (completedTerms.length / data.terms.length) * 100 : 0;
    document.getElementById('termProgress').style.width = termProgress + '%';
    
    // 퀴즈 진행률
    const quizProgress = completedQuizzes.beginner ? 33 : 0;
    document.getElementById('quizProgress').style.width = quizProgress + '%';
    
    // 뉴스 진행률
    const newsProgress = data.news.length > 0 ? 
        (readNews.length / data.news.length) * 100 : 0;
    document.getElementById('newsProgress').style.width = newsProgress + '%';
    
    // 설명 업데이트
    document.getElementById('termsDesc').textContent = 
        `${data.terms.length}개의 금융 용어 학습 (${completedTerms.length}개 완료)`;
    document.getElementById('quizDesc').textContent = 
        `오늘의 퀴즈 ${completedQuizzes.beginner ? '일부 완료' : '미완료'}`;
    document.getElementById('newsDesc').textContent = 
        `${data.news.length}개의 뉴스 (${readNews.length}개 읽음)`;
}

// 새로고침
function refreshNews() {
    const refreshIcon = document.getElementById('refreshIcon');
    refreshIcon.style.transform = 'rotate(360deg)';
    refreshIcon.style.transition = 'transform 0.5s ease';
    
    checkAndGenerateTodayData();
    
    setTimeout(() => {
        refreshIcon.style.transform = 'rotate(0deg)';
    }, 500);
}

// 페이지 로드시 실행
document.addEventListener('DOMContentLoaded', async function() {
    updateCurrentTime();
    setInterval(updateCurrentTime, 1000);
    
    await checkAndGenerateTodayData();
});
</script>

</body>
</html>
